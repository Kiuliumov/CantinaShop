{% load static %}

<!DOCTYPE html>
<html lang="en" x-data="passwordStrength()" x-init="init()">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Register</title>

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>

    <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.min.css');</style>

    <!-- Tailwind CSS CDN or your own build here -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="min-w-screen min-h-screen bg-gray-900 flex items-center justify-center px-5 py-5">

<div class="bg-gray-100 text-gray-500 rounded-3xl shadow-xl w-full overflow-hidden max-w-4xl">
    <div class="md:flex w-full">
        <div class="hidden md:block w-1/2 bg-indigo-500 py-10 px-10">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 744.84799 747.07702" class="w-full h-auto">
            </svg>
        </div>
        <div class="w-full md:w-1/2 py-10 px-5 md:px-10">
            <div class="text-center mb-10">
                <h1 class="font-bold text-3xl text-gray-900">REGISTER</h1>
                <p>Enter your information to register</p>
            </div>

            <form method="POST" novalidate>
                {% csrf_token %}
                
                <div class="flex -mx-3">
                    <div class="w-1/2 px-3 mb-5">
                        <label for="first_name" class="text-xs font-semibold px-1">First name</label>
                        <div class="flex">
                            <div class="w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center">
                                <i class="mdi mdi-account-outline text-gray-400 text-lg"></i>
                            </div>
                            <input
                                id="first_name"
                                name="first_name"
                                type="text"
                                value="{{ form.first_name.value|default_if_none:'' }}"
                                class="w-full -ml-10 pl-10 pr-3 py-2 rounded-lg border-2 {% if form.first_name.errors %}border-red-500{% else %}border-gray-200{% endif %} outline-none focus:border-indigo-500"
                                placeholder="John"
                            />
                        </div>
                        {% for error in form.first_name.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>

                    <div class="w-1/2 px-3 mb-5">
                        <label for="last_name" class="text-xs font-semibold px-1">Last name</label>
                        <div class="flex">
                            <div class="w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center">
                                <i class="mdi mdi-account-outline text-gray-400 text-lg"></i>
                            </div>
                            <input
                                id="last_name"
                                name="last_name"
                                type="text"
                                value="{{ form.last_name.value|default_if_none:'' }}"
                                class="w-full -ml-10 pl-10 pr-3 py-2 rounded-lg border-2 {% if form.last_name.errors %}border-red-500{% else %}border-gray-200{% endif %} outline-none focus:border-indigo-500"
                                placeholder="Smith"
                            />
                        </div>
                        {% for error in form.last_name.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>

                <div class="flex -mx-3">
                    <div class="w-full px-3 mb-5">
                        <label for="email" class="text-xs font-semibold px-1">Email</label>
                        <div class="flex">
                            <div class="w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center">
                                <i class="mdi mdi-email-outline text-gray-400 text-lg"></i>
                            </div>
                            <input
                                id="email"
                                name="email"
                                type="email"
                                value="{{ form.email.value|default_if_none:'' }}"
                                class="w-full -ml-10 pl-10 pr-3 py-2 rounded-lg border-2 {% if form.email.errors %}border-red-500{% else %}border-gray-200{% endif %} outline-none focus:border-indigo-500"
                                placeholder="johnsmith@example.com"
                            />
                        </div>
                        {% for error in form.email.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>

                <div class="flex -mx-3">
                    <div class="w-full px-3 mb-12" x-data="{ password: '', strength: 0, feedback: '' }" @input="$dispatch('password-input', $event.target.value)">
                        <label for="password" class="text-xs font-semibold px-1">Password</label>
                        <div class="flex">
                            <div class="w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center">
                                <i class="mdi mdi-lock-outline text-gray-400 text-lg"></i>
                            </div>
                            <input
                                id="password"
                                name="password"
                                type="password"
                                x-model="password"
                                @input="
                                    const result = zxcvbn(password);
                                    strength = result.score;
                                    feedback = result.feedback.warning || 'Strong password';
                                "
                                class="w-full -ml-10 pl-10 pr-3 py-2 rounded-lg border-2 {% if form.password.errors %}border-red-500{% else %}border-gray-200{% endif %} outline-none focus:border-indigo-500"
                                placeholder="••••••••"
                            />
                        </div>

                        <div class="mt-2 h-2 rounded bg-gray-300">
                            <div
                                :class="{
                                    'bg-red-600 w-1/4': strength === 0,
                                    'bg-orange-500 w-2/4': strength === 1,
                                    'bg-yellow-400 w-3/4': strength === 2,
                                    'bg-green-400 w-4/4': strength >= 3
                                }"
                                class="h-2 rounded transition-all duration-300"
                            ></div>
                        </div>
                        <p x-text="feedback" class="text-xs mt-1 text-gray-600"></p>

                        {% for error in form.password.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>

                <div class="flex -mx-3">
                    <div class="w-full px-3 mb-5">
                        <button type="submit" class="block w-full max-w-xs mx-auto bg-indigo-500 hover:bg-indigo-700 focus:bg-indigo-700 text-white rounded-lg px-3 py-3 font-semibold">
                            Register
                        </button>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>

<script>
    function passwordStrength() {
        return {
            password: '',
            strength: 0,
            feedback: '',
            init() {
                this.$watch('password', value => {
                    if (!value) {
                        this.strength = 0;
                        this.feedback = '';
                        return;
                    }
                    const result = zxcvbn(value);
                    this.strength = result.score;
                    this.feedback = result.feedback.warning || 'Strong password';
                });
            }
        }
    }
</script>

</body>
</html>
