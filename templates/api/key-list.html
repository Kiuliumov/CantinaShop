{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-extrabold mb-6 text-blue-400 text-center">Your API Keys</h1>

  <table class="min-w-full bg-gray-900 border border-blue-700 rounded-lg shadow-lg">
    <thead class="bg-blue-800 border-b border-blue-600">
      <tr>
        <th class="px-6 py-3 text-left text-sm font-semibold text-blue-300 uppercase tracking-wide">Key</th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-blue-300 uppercase tracking-wide">Created</th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-blue-300 uppercase tracking-wide">Expires</th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-blue-300 uppercase tracking-wide">Created By</th>
        <th class="px-6 py-3"></th>
      </tr>
    </thead>
    <tbody>
      {% for key in api_keys %}
        <tr class="even:bg-gray-800 odd:bg-gray-700 hover:bg-blue-700 transition-colors duration-200">
          <td class="px-6 py-4 border-b border-blue-700 font-mono text-blue-200 break-all max-w-xs" title="{{ key.key }}">{{ key.key }}</td>
          <td class="px-6 py-4 border-b border-blue-700 text-blue-300">{{ key.created_at|date:"M d, Y H:i" }}</td>
          <td class="px-6 py-4 border-b border-blue-700 text-blue-300">
            {% if key.expires_at %}
              {{ key.expires_at|date:"M d, Y H:i" }}
            {% else %}
              <span class="italic text-blue-400">Never</span>
            {% endif %}
          </td>
          <td class="px-6 py-4 border-b border-blue-700 text-blue-300">{{ key.user.get_full_name|default:key.user.username }}</td>
          <td class="px-6 py-4 border-b border-blue-700 text-right">
            <form method="post" class="inline-block">
              {% csrf_token %}
              <input type="hidden" name="key_id" value="{{ key.id }}">
              <button
                type="submit"
                class="delete-btn bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded-lg font-semibold shadow-md transition duration-150"
              >
                Delete
              </button>
            </form>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5" class="px-6 py-8 text-center text-blue-400 italic font-medium">No API keys found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
    {% include 'partials/pop-ups/confirm_delete.html' %}
{% endblock %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'js/boxes/confirmDelete.js' %}"></script>
{% endblock %}
